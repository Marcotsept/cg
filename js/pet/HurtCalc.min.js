var HurtCalc=new (function(){var b={H:{H:3,B:1,P:3,U:5,F:3,I:2,A:3,M:4,D:3,Bo:5},B:{H:5,B:3,P:1,U:3,F:2,I:3,A:3,M:3,D:4,Bo:5},P:{H:3,B:5,P:3,U:1,F:3,I:4,A:2,M:3,D:3,Bo:5},U:{H:1,B:3,P:5,U:3,F:4,I:3,A:3,M:2,D:3,Bo:5},F:{H:3,B:4,P:3,U:2,F:3,I:1,A:3,M:3,D:5,Bo:5},I:{H:4,B:3,P:2,U:3,F:5,I:3,A:1,M:3,D:3,Bo:5},A:{H:3,B:3,P:4,U:3,F:3,I:5,A:3,M:1,D:2,Bo:5},M:{H:2,B:3,P:3,U:4,F:3,I:3,A:5,M:3,D:1,Bo:5},D:{H:3,B:2,P:3,U:3,F:1,I:3,A:4,M:5,D:3,Bo:5},Bo:{H:1,B:1,P:1,U:1,F:1,I:1,A:1,M:1,D:1,Bo:3}};var a,q,l,i,d;this.phyHurt=function(y,u){var w=[1.25],x={},v=0;a=y.atk;l=u.def;q=h(a);i=h(l);d=s(q,i);w.push(j(y.attrs,u.attrs));w.push(o(y.kind,u.kind));w.push(c(y.skill,y.skill_lv));if(y.hasCritical){d+=e(y.lv,u.lv,u.def);}if(y.hasKindWeapon){w.push(m(y.kindWeapon,u.kind));}x.hurt=d;for(v=0;v<w.length;v++){x.hurt*=w[v];}x.hurt=Math.round(x.hurt);x.upperHurt=Math.round(x.hurt*1.1);x.lowerHurt=Math.round(x.hurt*0.9);x.effect=w;return x;};this.magHurt=function(y,u){var w=[1.25],x={},v=0;if(y.skill!=12){d=g(y.skill,y.skill_lv);w.push(k(y.mnd,u.mnd));w.push(r(y.mnd,y.skill_lv));w.push(p(y.skill,u.attrs));w.push(n(y.matk,y.skill_lv));}else{d=f(y.mnd,u.def,y.skill_lv);if(y.hasCritical){d+=e(y.lv,u.lv,u.def);}w.push(t(y.atkNum));}w.push(j(y.attrs,u.attrs));w.push(o(y.kind,u.kind));if(y.hasKindWeapon){w.push(m(y.kindWeapon,u.kind));}x.hurt=d;for(v=0;v<w.length;v++){x.hurt*=w[v];}x.hurt=Math.round(x.hurt);x.upperHurt=Math.round(x.hurt*1.1);x.lowerHurt=Math.round(x.hurt*0.9);x.effect=w;x.base_hurt=d;return x;};function h(u){return(u<=240)?u:Math.round(240+(u-240)*0.3);}function s(u,v){return Math.round((Math.pow(u,2)*3)/(u+v*3));}function g(v,y){var x=[85,150,210,270,325,380,440,500,570,635],u=Math.floor(v/4),w=[1,0.6,0.4];return x[y-1]*w[u];}function f(w,v,x){var u=w*0.7+40*x-50;return s(u,v);}function j(v,u){var A=0,B=0,z=[0,0],y=0,w=0,x=0;for(y=0;y<4;y++){w=(y+1)%4;A+=v[y]*u[w];B+=v[w]*u[y];z[0]+=v[y];z[1]+=u[y];}x=(A-B)*0.003;x=x+((z[0]-z[1])*0.03);x=x+1;return x;}function o(w,v){var u=[1.3,1.15,1,0.85,0.7];return u[b[w][v]-1];}function m(w,v){var u=[1.2,1.1,1,0.9,0.8];return u[b[w][v]-1];}function e(w,v,u){return(w*u)/(v*2);}function t(u){var v=[1,0.88,0.77,0.66,0.55];return v[u-1];}function k(v,x){var w=parseFloat(v)/parseFloat(x),u=1;if(w>=1.2){u=1;}if(w<1.2&&w>=1.14){u=0.9;}if(w<1.14&&w>=1.05){u=0.82;}if(w<1.05&&w>=0.98){u=0.63;}if(w<0.98&&w>=0.9){u=0.55;}if(w<0.9&&w>=0.8){u=0.36;}if(w<0.8&&w>=0.7){u=0.27;}if(w<0.7){u=0.09;}return u;}function r(v,w){var u=[123,143,163,183,203,223,243,263,283,303];if(v<u[w-1]){return(v/u[w-1]);}else{return 1;}}function p(u,w){var v=u%4;return 1+((w[(v+1)%4]-w[(v+3)%4])*0.035);}function n(v,x){var u=[10,40,70,100,130,160,190,220,250,280],w=[14,48,82,116,150,184,218,252,286,320];if(v<=u[x-1]){return 1;}else{return 1+Math.min((((v-u[x-1])/(w[x-1]-u[x-1]))*0.5),0.5);}}function c(v,w){var u;switch(v){case 0:u=1;break;case 1:u=0.45;break;case 2:u=0.75;break;case 3:u=1.25;break;case 4:u=0.7;break;case 5:u=1+(0.1*w);break;case 6:a=a*(1.5+0.1*w);q=h(a);d=s(q,i);u=1;break;case 7:u=1+(0.07*w);break;case 8:u=(Math.pow((10+w),2)-1)/100;break;}return u;}})();